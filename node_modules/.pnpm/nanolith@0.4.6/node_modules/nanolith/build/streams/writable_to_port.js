import{Writable}from"stream";export class WritableToPort extends Writable{#t;#e;#s;get metaData(){return this.#s}constructor(t,e,s={}){super(),this.#e=t,this.#t=e,this.#s=s,this.once("finish",(()=>{const e={type:"stream-finished",id:this.#t};t.postMessage(e),this.destroy()}))}_write(t,e,s){const i={type:"stream-chunk",id:this.#t,data:t};this.#e.postMessage(i),s()}}